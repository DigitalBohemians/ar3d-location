<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>AR Location ‚Äì Hydra</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
    <script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/AR-js-org/AR.js@3.4.5/aframe/build/aframe-ar-nft.js"></script>
    <style>
      * { margin: 0; padding: 0; box-sizing: border-box; }
      body { background: #000; overflow: hidden; font-family: sans-serif; }
      #overlay {
        position: fixed; inset: 0; background: rgba(0,0,0,0.85);
        display: flex; flex-direction: column; align-items: center;
        justify-content: center; z-index: 9999; color: white;
        text-align: center; padding: 30px;
      }
      #overlay h1 { font-size: 26px; margin-bottom: 12px; }
      #overlay p  { font-size: 15px; color: #ccc; margin-bottom: 30px; line-height: 1.5; }
      #startBtn {
        padding: 16px 36px; font-size: 18px; font-weight: 700;
        background: #fff; color: #000; border: none;
        border-radius: 14px; cursor: pointer;
      }
      #status {
        position: fixed; top: 16px; left: 50%; transform: translateX(-50%);
        background: rgba(0,0,0,0.6); color: white; padding: 8px 16px;
        border-radius: 20px; font-size: 13px; z-index: 8888;
        display: none; text-align: center; max-width: 90vw;
      }
    </style>
  </head>
  <body>
    <div id="overlay">
      <h1>üó∫ AR auf Hydra</h1>
      <p>Diese Seite nutzt deine Kamera und deinen Standort.<br>Bitte beides erlauben wenn gefragt.</p>
      <button id="startBtn">‚ñ∂ AR Starten</button>
    </div>
    <div id="status">üìç GPS wird ermittelt‚Ä¶</div>

    <a-scene
      vr-mode-ui="enabled: false"
      renderer="antialias: true; alpha: true; logarithmicDepthBuffer: true;"
      arjs="sourceType: webcam; debugUIEnabled: false; videoTexture: true;"
      loading-screen="enabled: false"
    >
      <a-assets>
        <a-asset-item id="model" src="Matiblendlocationtest.glb"></a-asset-item>
      </a-assets>

      <a-entity
        gps-new-entity-place="latitude: 37.350000; longitude: 23.466767"
        position="0 0 0"
        scale="2 2 2"
      >
        <a-entity
          gltf-model="#model"
          animation-mixer="loop: repeat"
          position="0 0 0"
          scale="1 1 1"
        ></a-entity>
      </a-entity>

      <a-camera gps-new-camera="gpsMinDistance: 2; gpsTimeInterval: 1000;"></a-camera>
    </a-scene>

    <script>
      const overlay  = document.getElementById('overlay');
      const startBtn = document.getElementById('startBtn');
      const status   = document.getElementById('status');

      startBtn.addEventListener('click', () => {
        overlay.style.display = 'none';
        status.style.display  = 'block';
        if (navigator.geolocation) {
          navigator.geolocation.watchPosition(
            (pos) => {
              const lat = pos.coords.latitude.toFixed(5);
              const lon = pos.coords.longitude.toFixed(5);
              const acc = Math.round(pos.coords.accuracy);
              status.textContent = `üìç ${lat}, ${lon} (¬±${acc}m)`;
            },
            (err) => { status.textContent = '‚ö†Ô∏è GPS Fehler: ' + err.message; },
            { enableHighAccuracy: true, maximumAge: 0, timeout: 15000 }
          );
        }
      });
    </script>
  </body>
</html>
